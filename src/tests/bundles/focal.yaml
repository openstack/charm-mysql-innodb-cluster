local_overlay_enabled: false
series: focal
applications:
  keystone-mysql-router:
    charm: ch:mysql-router
    channel: 8.0.19/edge
  vault-mysql-router:
    charm: ch:mysql-router
    channel: 8.0.19/edge
  mysql-innodb-cluster:
    series: focal
    charm: ../../../mysql-innodb-cluster.charm
    num_units: 3
  keystone:
    charm: ch:keystone
    num_units: 1
    channel: xena/edge
  vault:
    charm: ch:vault
    num_units: 1
    channel: 1.7/edge
relations:
  - - vault:certificates
    - mysql-innodb-cluster:certificates
  - - vault:certificates
    - keystone:certificates
  - - keystone:shared-db
    - keystone-mysql-router:shared-db
  - - vault:shared-db
    - vault-mysql-router:shared-db
  - - keystone-mysql-router:db-router
    - mysql-innodb-cluster:db-router
  - - vault-mysql-router:db-router
    - mysql-innodb-cluster:db-router
